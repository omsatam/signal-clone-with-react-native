(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{239:function(e,t,a){"use strict";a.d(t,"a",(function(){return J}));a(326);var n=a(75),r=a(0),o=a.n(r),i=a(2),c=a(177),l=a(16),s=a.n(l),u=a(4),m=a(31),d=a(86),p=a(106),h=(a(315),a(316),(0===p.a.apps.length?p.a.initializeApp({apiKey:"AIzaSyCMBung6oBS-PywCSbZtYrVu45iGxO6Leo",authDomain:"signal-clone-app-a536e.firebaseapp.com",databaseURL:"https://signal-clone-app-a536e-default-rtdb.firebaseio.com",projectId:"signal-clone-app-a536e",storageBucket:"signal-clone-app-a536e.appspot.com",messagingSenderId:"991944109860",appId:"1:991944109860:web:32ffe974bcd00200700db1",measurementId:"G-KL57K8VWQQ"}):p.a.app()).firestore()),g=p.a.auth(),f=function(e){var t=e.navigation,a=Object(r.useState)(""),i=s()(a,2),c=i[0],l=i[1],p=Object(r.useState)(""),h=s()(p,2),f=h[0],b=h[1];Object(r.useEffect)((function(){return g.onAuthStateChanged((function(e){e&&t.replace("Home")}))}),[]);var y=function(){g.signInWithEmailAndPassword(c,f).catch((function(e){return alert(e.message)}))};return o.a.createElement(d.a,{behavior:"padding",style:E.container},o.a.createElement(n.a,{style:"light"}),o.a.createElement(m.c,{source:{uri:"https://blog.mozilla.org/internetcitizen/files/2018/08/signal-logo.png"},style:{width:200,height:200}}),o.a.createElement(u.a,{style:E.inputContainer},o.a.createElement(m.d,{placeholder:"Email",value:c,onChangeText:function(e){return l(e)},autoFocus:!0,type:"email"}),o.a.createElement(m.d,{placeholder:"Password",value:f,onChangeText:function(e){return b(e)},secureTextEntry:!0,type:"password",onSubmitEditing:y})),o.a.createElement(m.b,{containerStyle:E.button,onPress:y,title:"Login"}),o.a.createElement(m.b,{containerStyle:E.button,onPress:function(){return t.navigate("Register")},type:"outline",title:"Register"}),o.a.createElement(u.a,{style:{height:100}}))},E=i.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"white",padding:10},inputContainer:{width:300},button:{width:200,marginTop:10}}),b=a(341),y=function(e){var t=e.navigation,a=Object(r.useState)(""),i=s()(a,2),c=i[0],l=i[1],p=Object(r.useState)(""),h=s()(p,2),f=h[0],E=h[1],b=Object(r.useState)(""),y=s()(b,2),C=y[0],w=y[1],S=Object(r.useState)(""),x=s()(S,2),O=x[0],k=x[1];Object(r.useLayoutEffect)((function(){t.setOptions({headerBackTitle:"Back to Login"})}),[t]);var L=function(){""!==f&&""!==C&&""!==c&&g.createUserWithEmailAndPassword(f,C).then((function(e){e.user.updateProfile({displayName:c,photoURL:O||"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png"})})).catch((function(e){return alert(e.message)}))};return o.a.createElement(d.a,{behavior:"padding",style:v.container},o.a.createElement(n.a,{style:"light"}),o.a.createElement(m.f,{h3:!0,style:{marginBottom:50}},"Create a Signal account"),o.a.createElement(u.a,{style:v.inputContainer},o.a.createElement(m.d,{placeholder:"Full Name",type:"text",autoFocus:!0,value:c,onChangeText:function(e){return l(e)}}),o.a.createElement(m.d,{placeholder:"Email",type:"email",value:f,onChangeText:function(e){return E(e)}}),o.a.createElement(m.d,{placeholder:"Password",type:"password",secureTextEntry:!0,value:C,onChangeText:function(e){return w(e)}}),o.a.createElement(m.d,{placeholder:"Profile picture URL (optional)",value:O,onChangeText:function(e){return k(e)},onSubmitEditing:L})),o.a.createElement(m.b,{containerStyle:v.button,raised:!0,title:"Register",onPress:L}),o.a.createElement(u.a,{style:{height:100}}))},v=i.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},button:{width:200,marginTop:10},inputContainer:{width:300}}),C=a(85),w=a(53),S=a(24),x=function(e){var t,a,n,i=e.id,c=e.chatName,l=e.enterChat,u=e.navigation,d=Object(r.useState)([]),p=s()(d,2),g=p[0],f=p[1];return Object(r.useEffect)((function(){return h.collection("chats").doc(i).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return f(e.docs.map((function(e){return e.data()})))}))}),[u]),o.a.createElement(m.e,{key:i,onPress:function(){return l(i,c)}},o.a.createElement(m.a,{rounded:!0,source:{uri:(null==g||null==(t=g[0])?void 0:t.photoURL)||"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png"}}),o.a.createElement(m.e.Content,null,o.a.createElement(m.e.Title,{style:{fontWeight:"800"}},c),o.a.createElement(m.e.Subtitle,{numberOfLines:1,ellipsizeMode:"tail"},null==g||null==(a=g[0])?void 0:a.displayName,": ",null==g||null==(n=g[0])?void 0:n.message)))},O=(i.a.create({}),a(229)),k=a(224),L=function(e){var t=e.navigation,a=Object(r.useState)([]),n=s()(a,2),i=n[0],c=n[1],l=function(){g.signOut().then((function(){t.replace("Login")}))};Object(r.useEffect)((function(){h.collection("chats").onSnapshot((function(e){return c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(r.useLayoutEffect)((function(){t.setOptions({title:"Signal",headerStyle:{backgroundColor:"#ffff"},headerTitleStyle:{color:"black"},headerTintColor:"black",headerLeft:function(){var e;return o.a.createElement(u.a,{style:{marginLeft:20}},o.a.createElement(S.a,{onPress:l,activeOpacity:.5},o.a.createElement(m.a,{rounded:!0,source:{uri:null==g||null==(e=g.currentUser)?void 0:e.photoURL}})))},headerRight:function(){return o.a.createElement(u.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},o.a.createElement(S.a,{activeOpacity:.5},o.a.createElement(O.a,{name:"camerao",size:24,color:"black"})),o.a.createElement(S.a,{onPress:function(){return t.navigate("AddChat")},activeOpacity:.5},o.a.createElement(k.a,{name:"pencil",size:24,color:"black"})))}})}),[t]);var d=function(e,a){t.navigate("Chat",{id:e,chatName:a})};return o.a.createElement(C.a,null,o.a.createElement(w.a,{style:T.container},i.map((function(e){var t=e.id,a=e.data.chatName;return o.a.createElement(x,{key:t,id:t,chatName:a,enterChat:d})}))))},T=i.a.create({container:{height:"100%"}}),j=a(22),R=a.n(j),P=a(140),B=function(e){var t=e.navigation,a=Object(r.useState)(""),n=s()(a,2),i=n[0],c=n[1];Object(r.useLayoutEffect)((function(){t.setOptions({title:"Add a new Chat",headerBackTitle:"Chats"})}),[]);return o.a.createElement(u.a,{style:U.container},o.a.createElement(m.d,{placeholder:"Enter a chat name",value:i,onChangeText:function(e){return c(e)},leftIcon:o.a.createElement(P.default,{name:"wechat",type:"antdesign",size:24})}),o.a.createElement(m.b,{disabled:!i,onPress:function(){return R.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.awrap(h.collection("chats").add({chatName:i}).then((function(){t.goBack()})).catch((function(e){return alert(e.message)})));case 2:case"end":return e.stop()}}),null,null,null,Promise)},title:"Create new Chat"}))},U=i.a.create({container:{backgroundColor:"white",padding:30,height:"100%"}}),z=a(26),N=a(69),I=a(219),A=a(210),W=a(8),D=a(56),F=a(63),V=a(238),K=function(e){var t=e.navigation,a=e.route,i=Object(r.useState)(""),c=s()(i,2),l=c[0],p=c[1],f=Object(r.useState)([]),E=s()(f,2),b=E[0],y=E[1];Object(r.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerTitleAlign:"left",headerTitle:function(){var e;return o.a.createElement(u.a,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(m.a,{rounded:!0,source:{uri:(null==(e=b[b.length-1])?void 0:e.data.photoURL)||"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png"}}),o.a.createElement(z.a,{style:{color:"white",marginLeft:10,fontWeight:"700"}},a.params.chatName))},headerLeft:function(){return o.a.createElement(S.a,{style:{marginLeft:10},onPress:t.goBack},o.a.createElement(O.a,{name:"arrowleft",size:24,color:"white"}))},headerRight:function(){return o.a.createElement(u.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},o.a.createElement(S.a,null,o.a.createElement(I.a,{name:"video-camera",size:24,color:"white"})),o.a.createElement(S.a,null,o.a.createElement(A.a,{name:"call",size:24,color:"white"})))}})}),[t,b]),Object(r.useLayoutEffect)((function(){return h.collection("chats").doc(a.params.id).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return y(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[a]),console.log(b);var v=function(){F.a.dismiss(),""!==l&&h.collection("chats").doc(a.params.id).collection("messages").add({timestamp:V.a.firestore.FieldValue.serverTimestamp(),message:l,displayName:g.currentUser.displayName,email:g.currentUser.email,photoURL:g.currentUser.photoURL}),p("")};return o.a.createElement(C.a,{style:{flex:1,backgroundColor:"white"}},o.a.createElement(n.a,{style:"light"}),o.a.createElement(d.a,{behavior:"ios"===W.a.OS?"padding":"height",style:M.container,keyboardVerticalOffset:90},o.a.createElement(N.a,{onPress:F.a.dismiss},o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{contentContainerStyle:{paddingTop:15,paddingBottom:50}},b.map((function(e){var t=e.id,a=e.data;return a.email===g.currentUser.email?o.a.createElement(u.a,{key:t,style:M.reciever},o.a.createElement(m.a,{rounded:!0,position:"absolute",containerStyle:{position:"absolute",bottom:-15,right:-5},bottom:-15,right:-5,size:30,source:{uri:a.photoURL}}),o.a.createElement(z.a,{style:M.recieverText},a.message)):o.a.createElement(u.a,{key:t,style:M.sender},o.a.createElement(m.a,{position:"absolute",rounded:!0,containerStyle:{position:"absolute",bottom:-15,right:-5},bottom:-15,right:-5,size:30,source:{uri:a.photoURL}}),o.a.createElement(z.a,{style:M.senderText},a.message),o.a.createElement(z.a,{style:M.senderName},a.displayName))}))),o.a.createElement(u.a,{style:M.footer},o.a.createElement(D.a,{onChangeText:function(e){return p(e)},value:l,placeholder:"Signal Message",onSubmitEditting:v,style:M.textInput}),o.a.createElement(S.a,{onPress:v,activeOpacity:.5},o.a.createElement(A.a,{name:"send",size:24,color:"#2B68E6"})))))))},M=i.a.create({container:{flex:1},reciever:{padding:15,backgroundColor:"#ECECEC",alignSelf:"flex-end",borderRadius:20,marginRight:15,marginBottom:20,maxWidth:"80%",position:"relative"},sender:{padding:15,backgroundColor:"#2B68E6",alignSelf:"flex-start",borderRadius:20,margin:15,maxWidth:"80%",position:"relative"},senderName:{left:10,paddingRight:10,fontSize:10,color:"white"},senderText:{color:"white",fontWeight:"500",marginLeft:10,marginBottom:15},recieverText:{color:"black",fontWeight:"500",marginRight:10},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:15,position:"fixed",bottom:0},textInput:{bottom:0,height:40,flex:1,marginRight:15,backgroundColor:"#ECECEC",padding:10,color:"grey",borderRadius:30}}),G=Object(b.a)(),H={headerStyle:{backgroundColor:"#2C6BED"},headerTitleStyle:{color:"white",textAlign:"center"},headerTintColor:"white"};function J(){return o.a.createElement(c.a,null,o.a.createElement(G.Navigator,{screenOptions:H},o.a.createElement(G.Screen,{name:"Login",component:f}),o.a.createElement(G.Screen,{name:"Register",component:y}),o.a.createElement(G.Screen,{name:"Home",component:L}),o.a.createElement(G.Screen,{name:"AddChat",component:B}),o.a.createElement(G.Screen,{name:"Chat",component:K})))}i.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},251:function(e,t,a){e.exports=a(327)}},[[251,1,2]]]);
//# sourceMappingURL=app.b68a6db0.chunk.js.map